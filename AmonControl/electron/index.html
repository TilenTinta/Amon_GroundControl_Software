<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; img-src 'self' data:; script-src 'self'; style-src 'self'; connect-src http://127.0.0.1:8000;"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Amon Ground Control</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="app" data-view="select" data-drone="">
      <header class="topbar">
        <div class="brand">
          <div class="brand-block">
            <span class="system-tag">AMON SYSTEM</span>
            <div class="brand-text">Amon System Ground Control</div>
          </div>
        </div>
        <div class="topbar-right">
          <div class="topbar-actions">
            <div class="status-pill">
              <span class="status-dot"></span>
              <span id="linkStatus">Link offline</span>
            </div>
            <button id="linkBtn" class="ghost" type="button">Link Device</button>
            <button id="settingsBtn" class="icon-btn" type="button" aria-label="Settings">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path
                  fill="currentColor"
                  d="M19.14 12.94c.04-.3.06-.61.06-.94s-.02-.64-.06-.94l2.03-1.58a.5.5 0 0 0 .12-.65l-1.92-3.32a.5.5 0 0 0-.61-.22l-2.39.96c-.5-.38-1.04-.7-1.63-.94l-.36-2.54a.5.5 0 0 0-.5-.42h-3.84a.5.5 0 0 0-.5.42l-.36 2.54c-.59.24-1.13.56-1.63.94l-2.39-.96a.5.5 0 0 0-.61.22L2.6 7.83a.5.5 0 0 0 .12.65l2.03 1.58c-.04.3-.06.62-.06.94s.02.64.06.94L2.72 13.52a.5.5 0 0 0-.12.65l1.92 3.32c.13.23.39.32.61.22l2.39-.96c.5.38 1.04.7 1.63.94l.36 2.54c.04.24.25.42.5.42h3.84c.25 0 .46-.18.5-.42l.36-2.54c.59-.24 1.13-.56 1.63-.94l2.39.96c.23.1.49 0 .61-.22l1.92-3.32a.5.5 0 0 0-.12-.65l-2.03-1.58ZM12 15.5a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7Z"
                />
              </svg>
            </button>
          </div>
        </div>
      </header>

      <main>
        <section class="select-view">
          <div class="select-grid">
            <button class="drone-card" data-drone="amon" type="button">
              <div class="card-header">
                <img class="card-logo inverted" src="../../Images/AMON_logo.png" alt="AMON logo" />
                <div class="card-title">AMON Lander</div>
              </div>
              <img
                class="card-wireframe"
                src="../../Images/AmonLander_wireframe.png"
                alt="Amon Lander wireframe"
              />
            </button>
            <button class="drone-card" data-drone="talon" type="button">
              <div class="card-header">
                <img class="card-logo" src="../../Images/FLIGHTORY_logo.png" alt="Flightory logo" />
                <div class="card-title">Talon 1400</div>
              </div>
              <img
                class="card-wireframe"
                src="../../Images/Talon_1400_wireframe.png"
                alt="Talon 1400 wireframe"
              />
            </button>
          </div>
        </section>

        <section class="telemetry-view">
          <div class="telemetry-header">
            <div class="telemetry-brand">
              <img id="droneLogo" class="telemetry-logo" src="../../Images/AMON_logo.png" alt="Drone logo" />
              <div>
                <div id="droneName" class="telemetry-name">AMON Lander</div>
                <div class="telemetry-sub">Telemetry Dashboard</div>
              </div>
            </div>
            <div class="telemetry-actions">
              <div class="clock-stack">
                <div class="clock-row">
                  <span class="label">Local</span>
                  <span id="clockLocal" class="time-value">--:--:--</span>
                </div>
                <div class="clock-row">
                  <span class="label">Mission</span>
                  <span id="clockMission" class="time-value">00:00:00</span>
                </div>
              </div>
              <button id="backBtn" class="ghost" type="button">Back</button>
            </div>
          </div>

          <div class="telemetry-layout">
            <section class="plot-column">
              <div class="chart-card">
                <div class="panel-title">IMU Gyros</div>
                <canvas id="chartGyro" width="360" height="140"></canvas>
              </div>
              <div class="chart-card">
                <div class="panel-title">IMU Accels</div>
                <canvas id="chartAccel" width="360" height="140"></canvas>
              </div>
              <div class="chart-card">
                <div class="panel-title">Orientation X</div>
                <canvas id="chartOriX" width="360" height="140"></canvas>
              </div>
              <div class="chart-card">
                <div class="panel-title">Orientation Y</div>
                <canvas id="chartOriY" width="360" height="140"></canvas>
              </div>
              <div class="chart-card">
                <div class="panel-title">Orientation Z</div>
                <canvas id="chartOriZ" width="360" height="140"></canvas>
              </div>
              <div class="chart-card">
                <div class="panel-title">Altitude</div>
                <canvas id="chartAlt" width="360" height="140"></canvas>
              </div>
              <div class="chart-card">
                <div class="panel-title">XY Position</div>
                <canvas id="chartPos" width="360" height="140"></canvas>
              </div>
              <div class="chart-card">
                <div class="panel-title">XY Velocity</div>
                <canvas id="chartVel" width="360" height="140"></canvas>
              </div>
              <div class="chart-card">
                <div class="panel-title">Throttle</div>
                <canvas id="chartThrottle" width="360" height="140"></canvas>
              </div>
            </section>

            <aside class="data-column">
              <section class="panel model-panel small-model">
                <div class="panel-title">3D Model Viewport</div>
                <div class="model-placeholder">
                  <div id="modelViewport" class="model-viewport"></div>
                  <div class="axis">
                    <span>Roll <strong id="rollVal">--</strong></span>
                    <span>Pitch <strong id="pitchVal">--</strong></span>
                    <span>Yaw <strong id="yawVal">--</strong></span>
                  </div>
                </div>
              </section>
              <section class="panel">
                <div class="panel-title">Flight State</div>
                <div class="kv-grid">
                  <div><span class="label">State</span><span id="flightState">--</span></div>
                  <div><span class="label">Mode</span><span id="mode">--</span></div>
                  <div><span class="label">Battery</span><span id="battVoltage">-- V</span></div>
                  <div><span class="label">Signal</span><span id="signalDbm">-- dBm</span></div>
                  <div><span class="label">TLM</span><span id="tlmRate">-- Hz</span></div>
                  <div><span class="label">GPS</span><span id="gpsSat">--</span></div>
                  <div><span class="label">IMU Temp</span><span id="imuTemp">-- C</span></div>
                  <div><span class="label">Baro</span><span id="baroAlt">-- m</span></div>
                </div>
              </section>
              <section class="panel">
                <div class="panel-title">Navigation</div>
                <div class="kv-grid">
                  <div><span class="label">Heading</span><span id="heading">-- deg</span></div>
                  <div><span class="label">Ground Spd</span><span id="groundSpeed">-- m/s</span></div>
                  <div><span class="label">Climb</span><span id="climbRate">-- m/s</span></div>
                </div>
              </section>
              <section class="panel">
                <div class="panel-title">Comms</div>
                <div class="kv-grid">
                  <div><span class="label">Quality</span><span id="linkQuality">-- %</span></div>
                  <div><span class="label">Latency</span><span id="linkLatency">-- ms</span></div>
                  <div><span class="label">Loss</span><span id="packetLoss">-- %</span></div>
                </div>
              </section>

              <section class="panel">
                <div class="panel-title">TVC</div>
                <div class="kv-grid">
                  <div><span class="label">X</span><span id="tvcX">-- deg</span></div>
                  <div><span class="label">Y</span><span id="tvcY">-- deg</span></div>
                  <div><span class="label">Z</span><span id="tvcZ">-- deg</span></div>
                </div>
              </section>

              <section class="panel">
                <div class="panel-title">Throttle</div>
                <div class="throttle-value" id="throttleValue">-- %</div>
              </section>

              <section class="panel">
                <div class="panel-title">Raw Telemetry</div>
                <div class="kv-grid dense">
                  <div><span class="label">X</span><span id="posX">-- m</span></div>
                  <div><span class="label">Y</span><span id="posY">-- m</span></div>
                  <div><span class="label">Z</span><span id="posZ">-- m</span></div>
                  <div><span class="label">Vx</span><span id="velX">-- m/s</span></div>
                  <div><span class="label">Vy</span><span id="velY">-- m/s</span></div>
                  <div><span class="label">Vz</span><span id="velZ">-- m/s</span></div>
                  <div><span class="label">Ax</span><span id="accX">-- m/s2</span></div>
                  <div><span class="label">Ay</span><span id="accY">-- m/s2</span></div>
                  <div><span class="label">Az</span><span id="accZ">-- m/s2</span></div>
                </div>
              </section>

              <section class="panel control-panel">
                <div class="panel-title">Flight Controls</div>
                <div class="control-grid">
                  <button id="startFlightBtn" class="primary" type="button">Start Flight</button>
                  <button class="ghost" type="button">Arm</button>
                  <button class="ghost" type="button">Disarm</button>
                  <button class="ghost" type="button">Failsafe</button>
                </div>
              </section>
            </aside>
          </div>
        </section>
      </main>
    </div>

    <div id="linkModal" class="modal hidden">
      <div class="modal-card">
        <div class="modal-header">
          <div class="modal-title">Link Device</div>
          <button id="linkCloseBtn" class="icon-btn" type="button" aria-label="Close">
            <span class="close-x">Ã—</span>
          </button>
        </div>
        <div class="connect-bar">
          <div class="connect-field">
            <span class="label">Port</span>
            <select id="portSelect"></select>
          </div>
          <div class="connect-field">
            <span class="label">Baud</span>
            <select id="baudSelect">
              <option>9600</option>
              <option>57600</option>
              <option selected>115200</option>
              <option>230400</option>
              <option>460800</option>
            </select>
          </div>
          <button id="refreshPorts" class="ghost" type="button">Rescan</button>
          <button id="connectBtn" class="primary" type="button">Connect</button>
        </div>
      </div>
    </div>

    <script type="module" src="./renderer.js"></script>
  </body>
</html>
